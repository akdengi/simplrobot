# Редактор уровней и Головоломок для настольной игры Битва Големов v4.0

## Редактор уровней и Головоломок

Расположение: `bg_web_editor/bg_editor_quiz.html`

Управление:

* На десктопе: **Delete** или перенос в зону Корзины - удаление жетонов с поля. **Правая кнопка мыши** - поворот жетона на поле или смена стороны поля Лето-Зима (в слое 0). **Левая кнопка мыши** - перетаскивание жетонов.

* На мобильных устройствах: **Двойной тап** - поворот жетона или смена стороны поля Лето-Зима (в слое 0). **Долгое нажатие** - удаление жетона.

* Чек-бокс **Использовать жетоны краудфандинга** открывает доступ к бонус-жетонам с краудфандинга.
* Переключатель режимов **Редактор уровней - Редактор Головоломок** добавляет панель для задания параметров Головоломки: Сложности, использования Бонусов или Ботов и за какое число команд головоломка решается. Перебор вариантов иконок по левому клику мышкой или тапу на мобильных устройствах.
* Для очистки уровня нажмите кнопку **Очистить все** под окном редактора.
* Слой 0 - добавление/удаление и перемещение полей. Слои 1-3 для размещения жетонов.
* Для сохранения уровня необходимо задать его название и описание (по желанию) и нажать кнопку **Сохранить уровень**. Сохранение происходит в JSON формате и его можно использовать в [просмотрщике](#просмотрщик-уровней-и-головоломок). 
* Загрузить файл уровня можно кнопкой **Загрузить уровень**.
* На смартфоне для изменения положения жетона на поле, удалите его и разместите в нужном месте снова.
* Поворачивается всегда жетон самого верхнего слоя. Для поворота нижних жетонов, удалите верхний, потом верните его назад.
* При **Сохранении как изображение**, если не задано название уровня, то файл имеет имя по умолчанию `bg_level.png`.

Посмотреть работу редактора можно тут: [https://prostorobot.ru/bg4_level_editor](https://prostorobot.ru/bg4_level_editor).


## Просмотрщик уровней и головоломок

Расположение: `bg_web_editor/bg_level_viewer.html`

Если разместить этот код на HTML странице, то можно отрендерить уровни на ней. По умолчанию блоки настроены на Тильду (блок CL01) на блок с двумя текстовыми полями. В правое поле вставляется JSON содержимое файла уровня (рекомендуем использовать [минификацию JSON](https://seostudio.tools/ru/json-minify)), а в правом текстовом поле появляется название уровня, его описание и кнопка скачивания JSON. Модуль рендерит последовательно все найденный JSON файлы уровня на странице.


## CORS сервер изображений

Расположение: `picture_cors_server`

Веб-сервер для изображений редактора с CORS и набор картинок для него (в папке `picture_cors_server/bg_editor`). По умолчанию настроен на VPS с сервером у компании [HOSTKEY](hostkey.ru).

